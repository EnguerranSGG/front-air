<h2>Valeurs</h2>
    <button (click)="startCreate()" *ngIf="!isCreating && !editingValueId">➕ Ajouter une valeur</button>

    <form *ngIf="isCreating" [formGroup]="createForm" (ngSubmit)="addValue()">
      <input type="text" formControlName="title" placeholder="Titre" />
      <textarea formControlName="content" placeholder="Contenu"></textarea>

      <div>
        <label>Fichier lié :</label>
        <app-file-selector
          [files]="files"
          [selectedFileId]="createForm.value.file_id"
          (fileSelected)="onFileSelect($event)"
        ></app-file-selector>
      </div>

      <button type="submit">Créer</button>
      <button type="button" (click)="cancelCreate()">Annuler</button>
    </form>

    <div *ngFor="let value of values">
      <div *ngIf="editingValueId !== value.value_id">
        <h3>{{ value.name }}</h3>
        <div *ngIf="value.file?.file_id">
          <img
            [src]="apiUrl + '/files/' + value.file?.file_id + '/download'"
            alt="Illustration"
            width="100"
          />
        </div>
        <button (click)="startEdit(value)">✏️ Modifier</button>
        <button (click)="deleteValue(value.value_id)">🗑️ Supprimer</button>
      </div>

      <form *ngIf="editingValueId === value.value_id" [formGroup]="editForm" (ngSubmit)="saveEdit(value)">
        <input type="text" formControlName="title" placeholder="Titre" />
        <textarea formControlName="content" placeholder="Contenu"></textarea>

        <div>
          <label>Fichier lié :</label>
          <app-file-selector
            [files]="files"
            [selectedFileId]="editForm.value.file_id"
            (fileSelected)="onFileSelect($event)"
          ></app-file-selector>
        </div>

        <button type="submit">💾 Sauvegarder</button>
        <button type="button" (click)="cancelEdit()">Annuler</button>
      </form>
    </div>