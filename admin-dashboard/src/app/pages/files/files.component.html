<h2>ğŸ“ Gestion des fichiers</h2>

<!-- Formulaire de tÃ©lÃ©versement -->
<form class="create-form" [formGroup]="fileForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">

    <label class="file-upload">
        <span>ğŸ“ SÃ©lectionner un fichier</span>
        <input id="file" type="file" (change)="onFileSelected($event)" />
    </label>
    <!-- Affichage du nom du fichier sÃ©lectionnÃ© -->
    <div *ngIf="selectedFile" class="file-selected-name">
        âœ… Fichier sÃ©lectionnÃ© : <strong>{{ selectedFile.name }}</strong>
    </div>
    <input formControlName="name" type="text" placeholder="Nom du fichier" [readonly]="editingFileId !== null" />
    <div class="form-buttons">
        <button type="submit" [disabled]="fileForm.invalid || !selectedFile">
            {{ editingFileId ? 'ğŸ’¾ Mettre Ã  jour' : 'â¬†ï¸ TÃ©lÃ©verser' }}
        </button>
        <button type="button" *ngIf="editingFileId !== null" (click)="cancelEdit()">âŒ Annuler</button>
    </div>
</form>

<div *ngIf="files.length > 0; else noFiles">
    <div *ngFor="let file of files" class="event-card">
        <div class="event-content">
            <strong class="event-year">{{ file.name }}</strong>
        </div>
        <div class="event-buttons">
            <button href="#" (click)="onDownload(file); $event.preventDefault()">ğŸ“¥ TÃ©lÃ©charger</button>
            <button (click)="onEdit(file)">âœï¸ Modifier</button>
            <button (click)="onDelete(file.file_id)">ğŸ—‘ï¸ Supprimer</button>
        </div>
    </div>
</div>

<ng-template #noFiles>
    <p>Aucun fichier disponible.</p>
</ng-template>