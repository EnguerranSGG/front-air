---
// src/components/HistoryTimeline.astro

let events = [];

try {
  const res = await fetch(import.meta.env.PUBLIC_API_URL + '/times/all');
  const data = await res.json();
  events = Array.isArray(data)
    ? data.sort((a, b) => a.year - b.year) // tri chronologique
    : [];
} catch (err) {
  console.error('Erreur lors du fetch des événements temporels :', err);
}
---
<section class="timeline-section">
  <h2>Historique de l’association</h2>
  <div class="timeline">
    {events.map((event, index) => (
      <div class={`timeline-item ${index % 2 === 0 ? 'left' : 'right'}`} key={index}>
        <div class="content">{event.event_description}</div>
        <div class="year">{event.year}</div>
      </div>
    ))}
  </div>
</section>
