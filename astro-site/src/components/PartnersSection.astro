---
// src/components/PartnersCarousel.astro
let partners = [];
let partnersX2 = [];

try {
  const res = await fetch(import.meta.env.PUBLIC_API_URL + '/partners');
  const data = await res.json();
  partners = Array.isArray(data) ? data : [];
  partnersX2 = partners.concat(partners);
} catch (err) {
  console.error('Erreur lors de la récupération des partenaires :', err);
}
---
<section class="partners-carousel">
  <h2 class="carousel-title">Nos partenaires</h2>
  <div class="carousel-track">
    {partnersX2.map((partner) => (
      <div class="carousel-item" key={partner.parteners_id}>
        <img
          src={`${import.meta.env.PUBLIC_ASSET_URL}/files/${partner.file_id}/download`}
          alt={partner.name}
        />
      </div>
    ))}
  </div>
</section>
